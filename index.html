<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Priyanka Roy - Portfolio</title>
    <link href="https://api.fontshare.com/v2/css?f[]=general-sans@300,400,500,600,700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-color: #22d3ee;
            --secondary-color: #0891b2;
            --accent-color: #38bdf8;
            --purple-accent: #8b5cf6;
            --blue-accent: #3b82f6;
            --text-primary: #e5e7eb;
            --text-secondary: #9ca3af;
            --bg-primary: #0b0d0e;
            --bg-secondary: #0f1214;
            --bg-card: #111315;
            --border-color: #1f2428;
            --shadow: 0 1px 0 rgba(255, 255, 255, 0.02);
            --shadow-lg: 0 8px 24px rgba(0, 0, 0, 0.35);
            --glow: 0 0 0 rgba(0,0,0,0);
        }

        [data-theme="light"] {
            --primary-color: #06b6d4;
            --secondary-color: #0891b2;
            --accent-color: #38bdf8;
            --purple-accent: #8b5cf6;
            --blue-accent: #3b82f6;
            --text-primary: #0b0d0e;
            --text-secondary: #475569;
            --bg-primary: #f7f8f9;
            --bg-secondary: #ffffff;
            --bg-card: #ffffff;
            --border-color: #e5e7eb;
            --shadow: 0 1px 0 rgba(0, 0, 0, 0.02);
            --shadow-lg: 0 8px 24px rgba(0, 0, 0, 0.08);
            --glow: 0 0 0 rgba(0,0,0,0);
        }

        body {
            font-family: 'General Sans', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji", sans-serif;
            line-height: 1.6;
            color: var(--text-primary);
            background: var(--bg-primary);
            transition: all 0.3s ease;
            min-height: 100vh;
            overflow-x: hidden;
            letter-spacing: -0.01em;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            text-rendering: optimizeLegibility;
        }

        /* Animated Background */
        .animated-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            opacity: 0;
            display: none;
        }

        .floating-shapes {
            position: absolute;
            width: 100%;
            height: 100%;
        }

        .shape {
            position: absolute;
            border-radius: 50%;
            animation: float 6s ease-in-out infinite;
        }

        .shape:nth-child(1) {
            width: 80px;
            height: 80px;
            background: linear-gradient(45deg, var(--primary-color), var(--purple-accent));
            top: 20%;
            left: 10%;
            animation-delay: 0s;
        }

        .shape:nth-child(2) {
            width: 120px;
            height: 120px;
            background: linear-gradient(45deg, var(--blue-accent), var(--primary-color));
            top: 60%;
            left: 80%;
            animation-delay: 2s;
        }

        .shape:nth-child(3) {
            width: 60px;
            height: 60px;
            background: linear-gradient(45deg, var(--purple-accent), var(--secondary-color));
            top: 80%;
            left: 20%;
            animation-delay: 4s;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            33% { transform: translateY(-20px) rotate(120deg); }
            66% { transform: translateY(10px) rotate(240deg); }
        }

        /* Navigation */
        .navbar {
            position: fixed;
            top: 0;
            width: 100%;
            background: transparent;
            backdrop-filter: none;
            z-index: 1000;
            padding: 1rem 0;
            transition: background-color 0.2s ease, border-color 0.2s ease;
            border-bottom: none;
        }

        .navbar.scrolled {
            background: var(--bg-primary);
        }

        [data-theme="light"] .navbar {
            background: transparent;
            border-bottom: none;
        }

        [data-theme="light"] .navbar.scrolled {
            background: var(--bg-primary);
        }

        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.6rem;
            font-weight: 700;
            color: var(--text-primary);
            transition: color 0.2s ease;
        }

        .logo:hover {
            color: var(--primary-color);
            transform: none;
        }

        .nav-links {
            display: flex;
            list-style: none;
            gap: 2rem;
            align-items: center;
        }

        .nav-links a {
            text-decoration: none;
            color: var(--text-secondary);
            font-weight: 500;
            transition: color 0.2s ease;
            position: relative;
            padding: 0.5rem 0.25rem;
            border-radius: 0;
        }

        .nav-links a::before {
            content: '';
            position: absolute;
            left: 0;
            bottom: -4px;
            width: 0;
            height: 2px;
            background: var(--primary-color);
            transition: width 0.2s ease;
        }

        .nav-links a:hover::before { width: 100%; }

        .nav-links a:hover {
            color: var(--text-primary);
            background: rgba(34, 211, 238, 0.06);
            transform: none;
        }

        .nav-controls {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .theme-toggle {
            background: transparent;
            border: 1px solid var(--border-color);
            border-radius: 9999px;
            width: 40px;
            height: 40px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-primary);
            transition: background-color 0.2s ease, border-color 0.2s ease, color 0.2s ease, transform 0.2s ease;
            box-shadow: none;
        }

        .theme-toggle:hover {
            background: rgba(56,189,248,0.08);
            transform: none;
        }

        /* Hamburger button minimal styling with blue ring */
        .hamburger {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            gap: 4px;
            background: transparent;
            border: 1px solid var(--border-color);
            border-radius: 9999px;
            width: 40px;
            height: 40px;
            padding: 0;
            position: relative;
            transition: background-color 0.2s ease, border-color 0.2s ease;
        }

        .hamburger:hover {
            background: rgba(56,189,248,0.08);
        }

        .hamburger::after {
            content: '';
            position: absolute;
            inset: -4px;
            border: 2px solid var(--primary-color);
            border-radius: 9999px;
            opacity: 0;
            transform: scale(0.9);
            transition: opacity 0.2s ease, transform 0.2s ease;
            pointer-events: none;
        }

        .hamburger:hover::after {
            opacity: 1;
            transform: scale(1);
        }

        /* Hamburger bars size tweak */
        .hamburger span {
            width: 20px;
            height: 2px;
            background: var(--text-primary);
            transition: all 0.3s ease;
            border-radius: 2px;
        }

        .hamburger.active span:nth-child(1) {
            transform: rotate(45deg) translate(5px, 5px);
        }

        .hamburger.active span:nth-child(2) {
            opacity: 0;
        }

        .hamburger.active span:nth-child(3) {
            transform: rotate(-45deg) translate(5px, -5px);
        }

        /* Desktop Navigation Menu */
        .nav-menu {
            position: fixed;
            top: 80px;
            right: -350px;
            width: 320px;
            height: calc(100vh - 80px);
            background: var(--bg-card);
            backdrop-filter: none;
            border-left: 1px solid var(--border-color);
            transition: right 0.3s ease;
            z-index: 999;
            padding: 2rem;
            box-shadow: none;
        }

        [data-theme="light"] .nav-menu {
            background: var(--bg-card);
            border-left: 1px solid var(--border-color);
        }

        .nav-menu.active {
            right: 0;
        }

        .nav-menu-links {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .nav-menu-links li {
            margin-bottom: 0.5rem;
        }

        .nav-menu-links a {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 0.875rem 1rem;
            color: var(--text-primary);
            text-decoration: none;
            border-radius: 10px;
            transition: background-color 0.2s ease, color 0.2s ease;
            font-weight: 500;
            position: relative;
            overflow: hidden;
        }

        /* Blue ring hover for nav menu items (both themes) */
        .nav-menu-links a::after {
            content: '';
            position: absolute;
            inset: -4px;
            border: 2px solid var(--primary-color);
            border-radius: 12px;
            opacity: 0;
            transform: scale(0.98);
            transition: opacity 0.2s ease, transform 0.2s ease;
            pointer-events: none;
        }

        .nav-menu-links a:hover::after {
            opacity: 1;
            transform: scale(1);
        }

        .nav-menu-links a:hover {
            color: var(--text-primary);
            background: rgba(34, 211, 238, 0.06);
            transform: none;
        }

        .nav-menu-links a i {
            font-size: 1.1rem;
            width: 20px;
            text-align: center;
        }

        /* Overlay for mobile */
        .nav-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(5px);
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            z-index: 998;
        }

        .nav-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        /* Hero Section */
        .hero {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--bg-secondary);
            padding: 6rem 2rem 2rem;
            text-align: center;
            position: relative;
        }

        .hero-content {
            max-width: 800px;
            animation: heroFadeIn 1.2s ease-out;
            position: relative;
            z-index: 2;
        }

        .profile-img {
            width: 160px;
            height: 160px;
            border-radius: 50%;
            background: none;
            margin: 0 auto 2rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0;
            color: white;
            box-shadow: none;
            animation: none;
            position: relative;
            padding: 0;
            border: none;
            overflow: hidden;
        }

        .profile-img img {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            object-fit: cover;
            object-position: center;
        }

        .profile-img::before { display: none; }

        @keyframes profilePulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        @keyframes profileRing {
            0% { transform: rotate(0deg); opacity: 0.3; }
            100% { transform: rotate(360deg); opacity: 0.1; }
        }

        .hero h1 {
            font-size: 3.2rem;
            font-weight: 700;
            margin-bottom: 0.75rem;
            color: var(--text-primary);
            animation: none;
            line-height: 1.15;
            letter-spacing: -0.02em;
        }

        @keyframes textShimmer {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        .hero .tagline {
            font-size: 1.2rem;
            font-weight: 500;
            color: var(--text-secondary);
            margin-bottom: 0.5rem;
            opacity: 1;
            letter-spacing: -0.005em;
        }

        .hero .description {
            font-size: 1.05rem;
            color: var(--text-secondary);
            margin-bottom: 2rem;
            opacity: 1;
            letter-spacing: -0.005em;
        }

        @keyframes heroFadeIn {
            from {
                opacity: 0;
                transform: translateY(50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .social-links {
            display: flex;
            justify-content: center;
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .social-link {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 56px;
            height: 56px;
            background: var(--bg-card);
            border-radius: 50%;
            color: var(--text-primary);
            text-decoration: none;
            transition: background-color 0.2s ease, color 0.2s ease, border-color 0.2s ease;
            box-shadow: none;
            position: relative;
            border: 1px solid var(--border-color);
        }

        .social-link::before { display: none; }

        .social-link:hover {
            background: rgba(56,189,248,0.08);
            color: var(--text-primary);
            transform: none;
            box-shadow: none;
        }

        /* Section Styles */
        .section {
            padding: 6rem 2rem;
            max-width: 1200px;
            margin: 0 auto;
            position: relative;
        }

        .section-title {
            text-align: center;
            font-size: 2.4rem;
            font-weight: 700;
            margin-bottom: 3rem;
            color: var(--text-primary);
            position: relative;
            letter-spacing: -0.01em;
            line-height: 1.2;
        }

        .section-title::after {
            content: '';
            position: absolute;
            bottom: -12px;
            left: 50%;
            transform: translateX(-50%);
            width: 72px;
            height: 2px;
            background: var(--primary-color);
            border-radius: 999px;
        }

        /* Enhanced Timeline */
        .timeline-container {
            position: relative;
            max-width: 900px;
            margin: 0 auto;
        }

        .timeline-line {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            width: 2px;
            height: 100%;
            background: var(--border-color);
            border-radius: 1px;
        }

        /* Enhanced Timeline Progress */
        .timeline-progress {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            width: 4px;
            height: 0%;
            background: var(--primary-color);
            border-radius: 2px;
            transition: height 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: none;
            z-index: 2;
            will-change: height;
        }

        .timeline-dot {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            width: 12px;
            height: 12px;
            background: var(--primary-color);
            border-radius: 50%;
            box-shadow: none;
            transition: top 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 3;
            animation: none;
            will-change: top;
        }

        @keyframes dotPulse {
            0%, 100% { box-shadow: var(--glow); }
            50% { box-shadow: 0 0 30px rgba(16, 185, 129, 0.6); }
        }

        .timeline {
            position: relative;
            padding: 2rem 0;
        }

        .timeline-item {
            margin-bottom: 4rem;
            opacity: 0;
            transition: all 0.6s ease;
        }

        .timeline-item.visible {
            opacity: 1;
        }

        .timeline-item:nth-child(odd) .timeline-content {
            margin-right: 55%;
            animation: slideInLeft 0.8s ease forwards;
        }

        .timeline-item:nth-child(even) .timeline-content {
            margin-left: 55%;
            animation: slideInRight 0.8s ease forwards;
        }

        .timeline-content {
            background: var(--bg-card);
            padding: 1.5rem;
            border-radius: 14px;
            box-shadow: none;
            border: 1px solid var(--border-color);
            position: relative;
            transition: background-color 0.2s ease, border-color 0.2s ease;
        }

        .timeline-content::before {
            content: '';
            position: absolute;
            top: 20px;
            width: 0;
            height: 0;
            border-style: solid;
        }

        .timeline-item:nth-child(odd) .timeline-content::before {
            right: -15px;
            border-width: 15px 0 15px 15px;
            border-color: transparent transparent transparent var(--bg-card);
        }

        .timeline-item:nth-child(even) .timeline-content::before {
            left: -15px;
            border-width: 15px 15px 15px 0;
            border-color: transparent var(--bg-card) transparent transparent;
        }

        .timeline-content:hover {
            transform: none;
            background: rgba(255,255,255,0.02);
        }

        .timeline-content h3 {
            color: var(--primary-color);
            font-size: 1.4rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .timeline-content h4 {
            color: var(--text-secondary);
            font-size: 1rem;
            margin-bottom: 1rem;
            font-weight: 500;
        }

        .timeline-content p {
            color: var(--text-secondary);
            line-height: 1.7;
        }

        /* Academic Cards */
        .academic-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 3rem;
            margin-top: 2rem;
        }

        .academic-card {
            background: var(--bg-card);
            border-radius: 14px;
            padding: 1.75rem;
            box-shadow: none;
            transition: background-color 0.2s ease, border-color 0.2s ease;
            border: 1px solid var(--border-color);
            position: relative;
            overflow: hidden;
        }

        .academic-card::before { display: none; }

        .academic-card:hover { background: rgba(255,255,255,0.02); transform: none; }

        .academic-card .icon {
            width: 72px;
            height: 72px;
            background: transparent;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-primary);
            font-size: 1.8rem;
            margin-bottom: 1.25rem;
            box-shadow: none;
            border: 1px solid var(--border-color);
        }

        .academic-card h3 {
            font-size: 1.4rem;
            color: var(--text-primary);
            margin-bottom: 0.5rem;
        }

        .academic-card .institution {
            color: var(--primary-color);
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .academic-card .duration {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        /* Projects Grid */
        .projects-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(380px, 1fr));
            gap: 3rem;
            margin-top: 2rem;
        }

        .project-card {
            background: var(--bg-card);
            border-radius: 14px;
            padding: 1.75rem;
            box-shadow: none;
            transition: background-color 0.2s ease, border-color 0.2s ease;
            border: 1px solid var(--border-color);
            position: relative;
            overflow: hidden;
        }

        .project-card::before { display: none; }

        .project-card:hover { background: rgba(255,255,255,0.02); transform: none; }

        .project-card h3 {
            color: var(--text-primary);
            font-size: 1.3rem;
            margin-bottom: 1rem;
        }

        .project-card p {
            color: var(--text-secondary);
            line-height: 1.7;
            margin-bottom: 2rem;
        }

        .project-buttons {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .btn {
            padding: 0.7rem 1.2rem;
            border: 1px solid var(--border-color);
            border-radius: 9999px;
            cursor: pointer;
            text-decoration: none;
            font-weight: 500;
            transition: background-color 0.2s ease, color 0.2s ease, border-color 0.2s ease;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            position: relative;
            overflow: hidden;
            box-shadow: none;
        }

        /* Override: neutral primary buttons; blue on hover only */
        .btn-primary {
            background: transparent;
            color: var(--text-primary);
            border-color: var(--border-color);
        }

        .btn-primary:hover {
            background: var(--primary-color);
            border-color: var(--primary-color);
            color: #0b0d0e;
        }

        .btn-secondary {
            background: transparent;
            color: var(--text-primary);
            border-color: var(--border-color);
        }

        .btn:hover { background: rgba(56, 189, 248, 0.08); color: var(--text-primary); }

        .btn-primary:hover { background: #1dc8e3; border-color: #1dc8e3; color: #0b0d0e; }

        /* Enhanced button interactions for toggle projects */
        .btn-group { display: flex; gap: 0.5rem; flex-wrap: wrap; position: relative; }

        .btn-toggle {
            padding: 0.7rem 1.2rem;
            border: 1px solid var(--border-color);
            border-radius: 9999px;
            cursor: pointer;
            text-decoration: none;
            font-weight: 500;
            transition: background-color 0.2s ease, color 0.2s ease, border-color 0.2s ease;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            position: relative;
            overflow: hidden;
            background: transparent;
            color: var(--text-primary);
        }

        .btn-toggle.active { background: var(--primary-color); color: #0b0d0e; border-color: var(--primary-color); }

        .btn-group:hover .btn-toggle:not(:hover) { background: transparent !important; color: var(--text-primary) !important; border-color: var(--border-color) !important; box-shadow: none !important; }

        .btn-toggle:hover { background: rgba(56,189,248,0.08) !important; color: var(--text-primary) !important; border-color: var(--primary-color) !important; transform: none; box-shadow: none; }

        .btn-toggle::before { display: none; }

        .btn-toggle:hover::before {
            left: 100%;
        }

        /* Connect Section */
        .connect { background: var(--bg-secondary); text-align: center; position: relative; }

        .connect-content {
            max-width: 600px;
            margin: 0 auto;
        }

        .connect p {
            font-size: 1.2rem;
            color: var(--text-secondary);
            margin-bottom: 2rem;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .nav-menu {
                right: -100%;
                width: 100%;
                top: 80px;
            }

            .hero h1 { font-size: 2.1rem; }
            .hero .tagline { font-size: 1rem; }
            .section-title { font-size: 1.9rem; }

            .profile-img {
                width: 150px;
                height: 150px;
                font-size: 3rem;
            }

            .section {
                padding: 4rem 1rem;
            }

            .section-title {
                font-size: 2rem;
            }

            /* Mobile Timeline */
            .timeline-line {
                left: 30px;
                transform: none;
            }

            .timeline-progress {
                left: 30px;
                transform: none;
            }

            .timeline-dot {
                left: 30px;
                transform: none;
            }

            .timeline-item:nth-child(odd) .timeline-content,
            .timeline-item:nth-child(even) .timeline-content {
                margin-left: 70px;
                margin-right: 0;
            }

            .timeline-item:nth-child(odd) .timeline-content::before,
            .timeline-item:nth-child(even) .timeline-content::before {
                left: -15px;
                right: auto;
                border-width: 15px 15px 15px 0;
                border-color: transparent var(--bg-card) transparent transparent;
            }

            .projects-grid,
            .academic-grid {
                grid-template-columns: 1fr;
                gap: 2rem;
            }

            .project-buttons {
                flex-direction: column;
            }

            .social-links {
                gap: 1rem;
            }

            .social-link {
                width: 50px;
                height: 50px;
            }
        }

        /* Animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideInLeft {
            from {
                opacity: 0;
                transform: translateX(-100px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(100px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        /* Scroll animations */
        .fade-in {
            opacity: 0;
            transform: translateY(30px);
            transition: all 0.8s ease;
        }

        .fade-in.visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* Loading animation */
        .loading {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--bg-primary);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            transition: opacity 0.5s ease;
        }

        .loading.hide {
            opacity: 0;
            pointer-events: none;
        }

        .spinner {
            width: 50px;
            height: 50px;
            border: 3px solid var(--border-color);
            border-top: 3px solid var(--primary-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Global type tweaks for General Sans */
        h1, h2, h3, h4, h5, h6 {
            font-family: 'General Sans', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji", sans-serif;
            font-feature-settings: "ss01" on, "liga" on, "kern" on;
            letter-spacing: -0.01em;
            line-height: 1.2;
        }

        p, li {
            letter-spacing: -0.005em;
        }

        /* Blue ring hover effect for social links and theme toggle */
        .social-link, .theme-toggle {
            position: relative;
        }

        .social-link::after, .theme-toggle::after {
            content: '';
            position: absolute;
            inset: -4px;
            border: 2px solid var(--primary-color);
            border-radius: 50%;
            opacity: 0;
            transform: scale(0.9);
            transition: opacity 0.2s ease, transform 0.2s ease;
            pointer-events: none;
        }

        .theme-toggle::after { border-radius: 9999px; }

        .social-link:hover::after, .theme-toggle:hover::after {
            opacity: 1;
            transform: scale(1);
        }

        /* Section title ring when nav menu is open */
        .section-title::before {
            content: '';
            position: absolute;
            inset: -8px -12px;
            border: 2px solid var(--primary-color);
            border-radius: 12px;
            opacity: 0;
            transform: scale(0.98);
            transition: opacity 0.2s ease, transform 0.2s ease;
            pointer-events: none;
        }

        body.nav-active .section-title::before {
            opacity: 1;
            transform: scale(1);
        }

        /* Consistent hover behavior for all project buttons */
        .project-card .btn,
        .project-card .btn-primary,
        .project-card .btn-toggle {
            background: transparent !important;
            color: var(--text-primary) !important;
            border: 1px solid var(--primary-color) !important;
        }

        .project-card .btn:hover,
        .project-card .btn-primary:hover,
        .project-card .btn-toggle:hover {
            background: var(--primary-color) !important;
            border-color: var(--primary-color) !important;
            color: #0b0d0e !important;
        }

        /* Neutralize persistent active fill for toggles inside project cards */
        .project-card .btn-toggle.active {
            background: transparent !important;
            border-color: var(--primary-color) !important;
            color: var(--text-primary) !important;
        }

        /* Section rail: minimal vertical navigation */
        .section-rail {
            position: fixed;
            top: 50%;
            left: 24px;
            transform: translateY(-50%);
            display: flex;
            flex-direction: column;
            gap: 14px;
            z-index: 1000;
        }

        .section-rail .rail-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            border: 1px solid var(--primary-color);
            background: transparent;
            display: inline-block;
            position: relative;
            transition: background-color 0.2s ease, transform 0.2s ease, border-color 0.2s ease;
        }

        .section-rail .rail-dot:hover {
            background: rgba(56,189,248,0.2);
            transform: scale(1.1);
        }

        .section-rail .rail-dot.active {
            background: var(--primary-color);
            border-color: var(--primary-color);
        }

        /* Tooltip label */
        .section-rail .rail-dot::after {
            content: attr(data-label);
            position: absolute;
            left: 18px;
            top: 50%;
            transform: translateY(-50%);
            background: var(--bg-card);
            color: var(--text-primary);
            border: 1px solid var(--border-color);
            padding: 4px 8px;
            font-size: 12px;
            border-radius: 8px;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.2s ease;
            white-space: nowrap;
        }

        .section-rail .rail-dot:hover::after { opacity: 1; }

        @media (max-width: 768px) {
            .section-rail { display: none; }
        }

        /* Subtle hero watermark */
        .hero::after {
            content: 'PR';
            position: absolute;
            inset: 0;
            display: block;
            font-weight: 700;
            font-family: 'General Sans', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji", sans-serif;
            font-size: clamp(120px, 28vw, 360px);
            line-height: 1;
            color: var(--text-primary);
            opacity: 0.03;
            pointer-events: none;
            user-select: none;
            text-align: center;
            display: grid;
            place-items: center;
        }

        /* Typewriter caret */
        .type-caret {
            display: inline-block;
            width: 10px;
            height: 1.1em;
            margin-left: 4px;
            background: var(--text-primary);
            opacity: 1;
            animation: caretBlink 1s steps(2, start) infinite;
            vertical-align: -2px;
        }

        @keyframes caretBlink {
            0%, 49% { opacity: 1; }
            50%, 100% { opacity: 0; }
        }

        /* Hide rail and hero watermark for the typewriter variant */
        .section-rail { display: none; }
        .hero::after { display: none; }

        /* Command palette (minimal) */
        .command-palette-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.5);
            backdrop-filter: blur(2px);
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.2s ease, visibility 0.2s ease;
            z-index: 1100;
        }

        .command-palette-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .command-palette {
            max-width: 560px;
            margin: 10vh auto 0;
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            box-shadow: none;
            color: var(--text-primary);
        }

        .command-palette .cp-input {
            width: 100%;
            padding: 14px 16px;
            border: none;
            outline: none;
            background: transparent;
            color: var(--text-primary);
            font-family: 'General Sans', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji", sans-serif;
            border-bottom: 1px solid var(--border-color);
        }

        .command-palette .cp-list {
            max-height: 300px;
            overflow-y: auto;
        }

        .cp-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 12px;
            padding: 10px 14px;
            cursor: pointer;
            border-bottom: 1px solid var(--border-color);
        }

        .cp-item:last-child { border-bottom: none; }

        .cp-item:hover,
        .cp-item.active {
            background: rgba(56,189,248,0.08);
        }

        .cp-item .cp-label { font-size: 14px; }
        .cp-item .cp-hint { font-size: 12px; color: var(--text-secondary); }

        /* Project category chips and filters */
        .project-filters {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
            margin-bottom: 1rem;
        }

        .filter-chip {
            padding: 0.45rem 0.9rem;
            border: 1px solid var(--border-color);
            border-radius: 9999px;
            cursor: pointer;
            background: transparent;
            color: var(--text-primary);
            font-weight: 500;
            font-size: 0.9rem;
            transition: background-color 0.2s ease, color 0.2s ease, border-color 0.2s ease;
        }

        .filter-chip:hover {
            background: rgba(56,189,248,0.08);
            border-color: var(--primary-color);
        }

        .filter-chip.active {
            background: var(--primary-color);
            border-color: var(--primary-color);
            color: #0b0d0e;
        }

        .project-chips {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
            margin-bottom: 0.75rem;
        }

        .chip {
            padding: 0.2rem 0.6rem;
            border: 1px solid var(--border-color);
            border-radius: 9999px;
            font-size: 0.75rem;
            color: var(--text-secondary);
        }

        .chip-speech { border-color: var(--primary-color); }
        .chip-nlp { border-color: var(--purple-accent); }
        .chip-analysis { border-color: #f59e0b; }

        .project-card.hidden { display: none; }
    </style>
</head>
<body>
    <!-- Loading Screen -->
    <div class="loading" id="loading">
        <div class="spinner"></div>
    </div>

    <!-- Animated Background -->
    <div class="animated-bg">
        <div class="floating-shapes">
            <div class="shape"></div>
            <div class="shape"></div>
            <div class="shape"></div>
        </div>
    </div>

    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="logo">PR</div>
            <div class="nav-controls">
                <button class="hamburger" onclick="toggleNavMenu()">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
                <button class="theme-toggle" onclick="toggleTheme()">
                    <i class="fas fa-sun"></i>
                </button>
            </div>
        </div>
    </nav>

    <!-- Command Palette -->
    <div id="cmdOverlay" class="command-palette-overlay" onclick="hideCommandPalette()" aria-hidden="true">
        <div class="command-palette" role="dialog" aria-modal="true" onclick="event.stopPropagation()">
            <input id="cmdInput" class="cp-input" type="text" placeholder="Type a command... (Esc to close)" aria-label="Command input" />
            <div id="cmdList" class="cp-list" role="listbox" aria-label="Commands"></div>
        </div>
    </div>

    <!-- Section Rail -->
    <div class="section-rail" aria-hidden="false">
        <a href="#home" class="rail-dot" data-label="Home" aria-label="Home"></a>
        <a href="#experience" class="rail-dot" data-label="Journey" aria-label="Professional Journey"></a>
        <a href="#education" class="rail-dot" data-label="Academics" aria-label="Academic Journey"></a>
        <a href="#projects" class="rail-dot" data-label="Builds" aria-label="Builds"></a>
        <a href="#connect" class="rail-dot" data-label="Connect" aria-label="Connect"></a>
    </div>

    <!-- Navigation Menu -->
    <div class="nav-overlay" onclick="closeNavMenu()"></div>
    <div class="nav-menu" id="navMenu">
        <ul class="nav-menu-links">
            <li><a href="#home" onclick="navigateAndClose('#home')">
                <i class="fas fa-user"></i> About
            </a></li>
            <li><a href="#experience" onclick="navigateAndClose('#experience')">
                <i class="fas fa-briefcase"></i> Professional Journey
            </a></li>
            <li><a href="#education" onclick="navigateAndClose('#education')">
                <i class="fas fa-graduation-cap"></i> Academic Journey
            </a></li>
            <li><a href="#projects" onclick="navigateAndClose('#projects')">
                <i class="fas fa-code"></i> Builds
            </a></li>
            <li><a href="#connect" onclick="navigateAndClose('#connect')">
                <i class="fas fa-envelope"></i> Let's Connect
            </a></li>
        </ul>
    </div>

    <!-- Hero Section -->
    <section id="home" class="hero">
        <div class="hero-content">
            <div class="profile-img">
                <img src="profile-picture.jpg" alt="Priyanka Roy">
            </div>
            <h1>Priyanka Roy</h1>
            <div class="tagline"><span id="typewriterText" aria-live="polite"></span><span class="type-caret" aria-hidden="true"></span></div>
            <div class="description">From structured tables to chaotic speech — I analyze it all.</div>
            <div class="social-links">
                <a href="https://www.linkedin.com/in/proy27" target="_blank" class="social-link">
                    <i class="fab fa-linkedin-in"></i>
                </a>
                <a href="https://github.com/priyankaroy27" target="_blank" class="social-link">
                    <i class="fab fa-github"></i>
                </a>
                <a href="mailto:proy272001@gmail.com" class="social-link">
                    <i class="fas fa-envelope"></i>
                </a>
                <a href="Priyanka_Roy.pdf" target="_blank" class="social-link" title="Resume" aria-label="Resume">
                    <i class="fas fa-file-alt"></i>
                </a>
            </div>
        </div>
    </section>

    <!-- Experience Section -->
    <section id="experience" class="section">
        <h2 class="section-title fade-in">Professional Journey</h2>
        <div class="timeline-container">
            <div class="timeline-line"></div>
            <div class="timeline-progress" id="timelineProgress"></div>
            <div class="timeline-dot" id="timelineDot"></div>
            <div class="timeline">
                <div class="timeline-item fade-in">
                    <div class="timeline-content">
                        <h3>Research Assistant</h3>
                        <h4>Universität Mannheim, Mannheim, Germany | Nov 2024 - Jan 2025</h4>
                        <p>Led large-scale cross-format data reconciliation and anomaly detection using R, integrating complex, heterogeneous datasets—including Twitter image metadata—to identify and resolve critical discrepancies. Ensured high-integrity data pipelines by developing automated validation scripts and advanced consistency checks across formats.</p>
                    </div>
                </div>
                <div class="timeline-item fade-in">
                    <div class="timeline-content">
                        <h3>Product Data Manager</h3>
                        <h4>ABB, Heidelberg, Germany | Apr 2023 - Aug 2024</h4>
                        <p>Optimized enterprise master data systems using Excel and SQL, driving improvements in data consistency, accessibility, and governance. Partnered cross-functionally with engineering, product, and business teams to design and implement scalable, streamlined product data integration strategies that enhanced operational efficiency and data reliability.</p>
                    </div>
                </div>
                <div class="timeline-item fade-in">
                    <div class="timeline-content">
                        <h3>Research Assistant</h3>
                        <h4>Universität Mannheim, Mannheim, Germany | Nov 2022 - Apr 2023</h4>
                        <p>Conducted in-depth analysis of census data to uncover demographic trends and behavioral patterns. Leveraged Python, including cosine similarity techniques, to measure population distribution similarities across regions and identify meaningful clusters and shifts in demographics.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Education Section -->
    <section id="education" class="section">
        <h2 class="section-title fade-in">Academic Journey</h2>
        <div class="academic-grid">
            <div class="academic-card fade-in">
                <div class="icon">
                    <i class="fas fa-graduation-cap"></i>
                </div>
                <h3>Masters in Data Science</h3>
                <div class="institution">Universität Mannheim</div>
                <div class="duration">Sep 2022 - Mar 2025, Mannheim, Germany</div>
            </div>
            <div class="academic-card fade-in">
                <div class="icon">
                    <i class="fas fa-laptop-code"></i>
                </div>
                <h3>Bachelors in Computer Applications</h3>
                <div class="institution">Maulana Abul Kalam Azad University of Technology</div>
                <div class="duration">Jul 2019 - Jun 2022, Kolkata, India</div>
            </div>
        </div>
    </section>

    <!-- Projects Section -->
    <section id="projects" class="section">
        <h2 class="section-title fade-in">Builds</h2>
        <div class="project-filters" aria-label="Project filters">
            <button class="filter-chip active" data-filter="all" type="button">All</button>
            <button class="filter-chip" data-filter="speech" type="button">Speech</button>
            <button class="filter-chip" data-filter="nlp" type="button">NLP</button>
            <button class="filter-chip" data-filter="analysis" type="button">Analysis</button>
        </div>
        <div class="projects-grid">
            <div class="project-card fade-in" data-tags="speech">
                <h3>Evaluating and Optimizing Online Speaker Diarization</h3>
                <div class="project-chips">
                    <span class="chip chip-speech">Speech</span>
                </div>
                <p>Developed a real-time speaker diarization system optimized for dynamic, multi-speaker conversations. Achieved a 23% Diarization Error Rate (DER), representing a 4% absolute improvement over comparable research baselines while preserving low-latency performance suitable for live applications.</p>
                <div class="project-buttons">
                    <div class="btn-group">
                        <a href="https://github.com/priyankaroy27/MMDS_MasterThesis" target="_blank" class="btn-toggle" onclick="toggleButton(this, 'implementation')">
                            <i class="fab fa-github"></i> Implementation
                        </a>
                        <a href="https://drive.google.com/file/d/1Cex-fLPkdtgr64gRgu3tfIaTCTx3BtYI/view?usp=sharing" target="_blank" class="btn-toggle" onclick="toggleButton(this, 'report')">
                            <i class="fas fa-file-alt"></i> Report
                        </a>
                    </div>
                </div>
            </div>

            <div class="project-card fade-in" data-tags="speech,nlp">
                <h3>Foodle - Real Time Cooking Assistant</h3>
                <div class="project-chips">
                    <span class="chip chip-speech">Speech</span>
                    <span class="chip chip-nlp">NLP</span>
                </div>
                <p>Developed a speech-driven, hands-free cooking assistant using ASR and RAG to generate structured recipes and enable voice-only, inclusive interaction.</p>
                <div class="project-buttons">
                    <a href="https://github.com/priyankaroy27#-foodle---real-time-cooking-assistant" target="_blank" class="btn btn-primary">
                        <i class="fab fa-github"></i> Implementation
                    </a>
                </div>
            </div>

            <div class="project-card fade-in" data-tags="speech,nlp">
                <h3>Speaker-Aware Voice Assistant</h3>
                <div class="project-chips">
                    <span class="chip chip-speech">Speech</span>
                    <span class="chip chip-nlp">NLP</span>
                </div>
                <p>Optimized a voice-based assistant built to identify speakers, transcribe conversations, and personalize interactions by remembering user preferences, enhancing seamless, memory-driven experiences for new and returning customers.</p>
                <div class="project-buttons">
                    <a href="https://github.com/priyankaroy27/STARTHACK25_Helbling" target="_blank" class="btn btn-primary">
                        <i class="fab fa-github"></i> Implementation
                    </a>
                </div>
            </div>

            <div class="project-card fade-in" data-tags="nlp">
                <h3>MapX - Automated Schema Mapping</h3>
                <div class="project-chips">
                    <span class="chip chip-nlp">NLP</span>
                </div>
                <p>Built a schema mapping tool using sentence-transformers and RAG for semantic alignment of relational databases.</p>
                <div class="project-buttons">
                    <a href="https://github.com/priyankaroy27/MapX-Automated_Schema_Mapping" target="_blank" class="btn btn-primary">
                        <i class="fab fa-github"></i> Implementation
                    </a>
                </div>
            </div>

            <div class="project-card fade-in" data-tags="analysis">
                <h3>SBA Loan Approval - Risk Classification</h3>
                <div class="project-chips">
                    <span class="chip chip-analysis">Analysis</span>
                </div>
                <p>Built a binary classification model with tuned XGBoost and Random Forest to predict SME loan repayments, achieving a 0.99 macro F1-score through thorough EDA, feature engineering, and data cleaning.</p>
                <div class="project-buttons">
                    <a href="https://github.com/priyankaroy27/SBA-Loan-Approval" target="_blank" class="btn btn-primary">
                        <i class="fab fa-github"></i> Implementation
                    </a>
                </div>
            </div>

            <div class="project-card fade-in" data-tags="speech">
                <h3>Co-Sync</h3>
                <div class="project-chips">
                    <span class="chip chip-speech">Speech</span>
                </div>
                <p>Built a meeting enhancement tool using Python, SpeechBrain, Whisper.</p>
                <div class="project-buttons">
                    <a href="https://github.com/priyankaroy27/CoSync" target="_blank" class="btn btn-primary">
                        <i class="fab fa-github"></i> Implementation
                    </a>
                </div>
            </div>
        </div>
    </section>

    <!-- Connect Section -->
    <section id="connect" class="section connect">
        <div class="connect-content">
            <h2 class="section-title fade-in">Let's Connect</h2>
            <p class="fade-in">I'm always interested in exploring new opportunities and collaborations.</p>
            <div class="social-links">
                <a href="https://www.linkedin.com/in/proy27" target="_blank" class="social-link">
                    <i class="fab fa-linkedin-in"></i>
                </a>
                <a href="https://github.com/priyankaroy27" target="_blank" class="social-link">
                    <i class="fab fa-github"></i>
                </a>
                <a href="mailto:proy272001@gmail.com" class="social-link">
                    <i class="fas fa-envelope"></i>
                </a>
                <a href="Priyanka_Roy.pdf" target="_blank" class="social-link" title="Resume" aria-label="Resume">
                    <i class="fas fa-file-alt"></i>
                </a>
            </div>
        </div>
    </section>

    <script>
        // Performance optimized scroll handling
        let ticking = false;
        let timelineItems = [];
        let timelineProgress;
        let timelineDot;

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            // Hide loading screen
            setTimeout(() => {
                document.getElementById('loading').classList.add('hide');
            }, 1000);

            // Cache timeline elements
            timelineItems = document.querySelectorAll('.timeline-item');
            timelineProgress = document.getElementById('timelineProgress');
            timelineDot = document.getElementById('timelineDot');

            // Initial animations
            handleScrollAnimation();
            updateTimeline();
        });

        // Theme Toggle with smooth transition
        function toggleTheme() {
            const body = document.body;
            const themeIcon = document.querySelector('.theme-toggle i');
            
            // Add transition class
            body.style.transition = 'all 0.3s ease';
            
            if (body.getAttribute('data-theme') === 'light') {
                body.removeAttribute('data-theme');
                themeIcon.className = 'fas fa-sun';
                localStorage.setItem('theme', 'dark');
            } else {
                body.setAttribute('data-theme', 'light');
                themeIcon.className = 'fas fa-moon';
                localStorage.setItem('theme', 'light');
            }

            // Remove transition after animation
            setTimeout(() => {
                body.style.transition = '';
            }, 300);
        }

        // Load saved theme
        function loadTheme() {
            const savedTheme = localStorage.getItem('theme');
            const themeIcon = document.querySelector('.theme-toggle i');
            
            if (savedTheme === 'light') {
                document.body.setAttribute('data-theme', 'light');
                themeIcon.className = 'fas fa-moon';
            } else {
                themeIcon.className = 'fas fa-sun';
            }
        }

        // Enhanced Navigation Menu
        function toggleNavMenu() {
            const navMenu = document.getElementById('navMenu');
            const hamburger = document.querySelector('.hamburger');
            const overlay = document.querySelector('.nav-overlay');
            
            navMenu.classList.toggle('active');
            hamburger.classList.toggle('active');
            overlay.classList.toggle('active');

            // Prevent body scroll when menu is open
            if (navMenu.classList.contains('active')) {
                document.body.style.overflow = 'hidden';
                document.body.classList.add('nav-active');
            } else {
                document.body.style.overflow = '';
                document.body.classList.remove('nav-active');
            }
        }

        function closeNavMenu() {
            const navMenu = document.getElementById('navMenu');
            const hamburger = document.querySelector('.hamburger');
            const overlay = document.querySelector('.nav-overlay');
            
            navMenu.classList.remove('active');
            hamburger.classList.remove('active');
            overlay.classList.remove('active');
            document.body.style.overflow = '';
            document.body.classList.remove('nav-active');
        }

        function navigateAndClose(target) {
            event.preventDefault();
            closeNavMenu();
            
            // Small delay to let menu close animation start
            setTimeout(() => {
                smoothScroll(target);
            }, 100);
        }

        // Enhanced Mobile Menu (legacy - keeping for compatibility)
        function toggleMobileMenu() {
            toggleNavMenu();
        }

        // Enhanced Scroll Animation
        function isElementInViewport(el, threshold = 0.1) {
            const rect = el.getBoundingClientRect();
            const windowHeight = window.innerHeight || document.documentElement.clientHeight;
            const elementHeight = rect.height;
            const elementTop = rect.top;
            
            return (elementTop + elementHeight * threshold) <= windowHeight && 
                   (elementTop + elementHeight - elementHeight * threshold) >= 0;
        }

        function handleScrollAnimation() {
            const elements = document.querySelectorAll('.fade-in:not(.visible)');
            
            elements.forEach(el => {
                if (isElementInViewport(el, 0.2)) {
                    el.classList.add('visible');
                }
            });

            // Timeline items animation
            timelineItems.forEach((item, index) => {
                if (isElementInViewport(item, 0.3)) {
                    setTimeout(() => {
                        item.classList.add('visible');
                    }, index * 200);
                }
            });
        }

        // Enhanced Timeline Progress
        function updateTimeline() {
            if (!timelineProgress || !timelineDot) return;

            const timelineContainer = document.querySelector('.timeline-container');
            if (!timelineContainer) return;

            const containerRect = timelineContainer.getBoundingClientRect();
            const containerTop = containerRect.top;
            const containerHeight = containerRect.height;
            const viewportHeight = window.innerHeight;

            let progress = 0;
            if (containerTop < viewportHeight * 0.5 && containerTop > -containerHeight) {
                const scrolled = viewportHeight * 0.5 - containerTop;
                progress = Math.min(Math.max(scrolled / containerHeight, 0), 1);
            } else if (containerTop <= -containerHeight) {
                progress = 1;
            }

            const targetHeight = progress * 100;
            timelineProgress.style.height = targetHeight + '%';

            const dotPosition = Math.min(progress * containerHeight - 6, containerHeight - 12);
            timelineDot.style.top = Math.max(dotPosition, 0) + 'px';
        }

        // Optimized scroll handler
        function requestTick() {
            if (!ticking) {
                requestAnimationFrame(() => {
                    handleScrollAnimation();
                    updateTimeline();
                    handleNavbarScroll();
                    ticking = false;
                });
                ticking = true;
            }
        }

        // Navbar Background on Scroll
        function handleNavbarScroll() {
            const navbar = document.querySelector('.navbar');
            
            if (window.scrollY > 50) {
                navbar.classList.add('scrolled');
            } else {
                navbar.classList.remove('scrolled');
            }
        }

        // Smooth Scrolling with offset
        function smoothScroll(target, duration = 1000) {
            const targetElement = document.querySelector(target);
            if (!targetElement) return;

            const targetPosition = targetElement.offsetTop - 80; // Account for navbar
            const startPosition = window.pageYOffset;
            const distance = targetPosition - startPosition;
            let startTime = null;

            function animateScroll(currentTime) {
                if (startTime === null) startTime = currentTime;
                const timeElapsed = currentTime - startTime;
                const run = easeInOutQuad(timeElapsed, startPosition, distance, duration);
                
                window.scrollTo(0, run);
                
                if (timeElapsed < duration) {
                    requestAnimationFrame(animateScroll);
                }
            }

            function easeInOutQuad(t, b, c, d) {
                t /= d / 2;
                if (t < 1) return c / 2 * t * t + b;
                t--;
                return -c / 2 * (t * (t - 2) - 1) + b;
            }

            requestAnimationFrame(animateScroll);
        }

        // Enhanced button toggle functionality
        function toggleButton(clickedButton, type) {
            // Prevent default link behavior for toggle effect
            event.preventDefault();
            
            // Find the button group
            const buttonGroup = clickedButton.closest('.btn-group');
            if (!buttonGroup) return;
            
            // Remove active class from all buttons in this group
            const allButtons = buttonGroup.querySelectorAll('.btn-toggle');
            allButtons.forEach(btn => btn.classList.remove('active'));
            
            // Add active class to clicked button
            clickedButton.classList.add('active');
            
            // Add a subtle animation effect
            clickedButton.style.transform = 'scale(0.95)';
            setTimeout(() => {
                clickedButton.style.transform = '';
            }, 150);
            
            // After toggle animation, navigate to the link
            setTimeout(() => {
                window.open(clickedButton.href, '_blank');
            }, 200);
        }

        // Enhanced Navigation
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = this.getAttribute('href');
                
                smoothScroll(target);
                
                // Close mobile menu
                const navLinks = document.querySelector('.nav-links');
                const hamburger = document.querySelector('.hamburger');
                if (navLinks.classList.contains('active')) {
                    navLinks.classList.remove('active');
                    hamburger.classList.remove('active');
                    document.body.style.overflow = '';
                }
            });
        });

        // Event Listeners
        window.addEventListener('scroll', requestTick, { passive: true });
        window.addEventListener('resize', requestTick, { passive: true });

        // Close mobile menu when clicking outside
        document.addEventListener('click', function(event) {
            const navMenu = document.getElementById('navMenu');
            const hamburger = document.querySelector('.hamburger');
            const navbar = document.querySelector('.navbar');
            
            if (!navbar.contains(event.target) && navMenu.classList.contains('active')) {
                closeNavMenu();
            }
        });

        // Load theme on page load
        loadTheme();

        // Intersection Observer for better performance
        if ('IntersectionObserver' in window) {
            const observerOptions = {
                root: null,
                rootMargin: '0px 0px -10% 0px',
                threshold: 0.1
            };

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('visible');
                        observer.unobserve(entry.target);
                    }
                });
            }, observerOptions);

            // Observe all fade-in elements
            document.querySelectorAll('.fade-in').forEach(el => {
                observer.observe(el);
            });

            // Section rail active state
            const sectionIds = ['home','experience','education','projects','connect'];
            const idToRail = new Map();
            sectionIds.forEach(id => {
                const rail = document.querySelector(`.section-rail .rail-dot[href="#${id}"]`);
                if (rail) idToRail.set(id, rail);
            });

            const sectionObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    const id = entry.target.getAttribute('id');
                    const rail = idToRail.get(id);
                    if (!rail) return;
                    if (entry.isIntersecting) {
                        document.querySelectorAll('.section-rail .rail-dot').forEach(d => d.classList.remove('active'));
                        rail.classList.add('active');
                    }
                });
            }, { root: null, rootMargin: '-30% 0px -50% 0px', threshold: 0.1 });

            sectionIds.forEach(id => {
                const section = document.getElementById(id);
                if (section) sectionObserver.observe(section);
            });
        }

        // Preload critical resources
        function preloadResources() {
            const links = [
                'https://api.fontshare.com/v2/css?f[]=general-sans@300,400,500,600,700&display=swap',
                'https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css'
            ];

            links.forEach(href => {
                const link = document.createElement('link');
                link.rel = 'preload';
                link.href = href;
                link.as = 'style';
                document.head.appendChild(link);
            });
        }

        preloadResources();

        // Typewriter effect
        (function initTypewriter() {
            const el = document.getElementById('typewriterText');
            if (!el) return;
            const phrases = [
                'Data Analyst',
                'AI Enthusiast',
                'Speech + NLP',
                'Pythonista'
            ];
            const typeDelay = 70;
            const eraseDelay = 40;
            const pauseDelay = 1200;
            let phraseIndex = 0;
            let charIndex = 0;
            let typing = true;

            function tick() {
                const phrase = phrases[phraseIndex];
                if (typing) {
                    charIndex++;
                    el.textContent = phrase.slice(0, charIndex);
                    if (charIndex === phrase.length) {
                        typing = false;
                        setTimeout(tick, pauseDelay);
                        return;
                    }
                    setTimeout(tick, typeDelay);
                } else {
                    charIndex--;
                    el.textContent = phrase.slice(0, Math.max(charIndex, 0));
                    if (charIndex === 0) {
                        typing = true;
                        phraseIndex = (phraseIndex + 1) % phrases.length;
                        setTimeout(tick, typeDelay);
                        return;
                    }
                    setTimeout(tick, eraseDelay);
                }
            }

            tick();
        })();

        // Command Palette
        const cmdOverlay = document.getElementById('cmdOverlay');
        const cmdInput = document.getElementById('cmdInput');
        const cmdList = document.getElementById('cmdList');
        let cmdItems = [];
        let cmdActiveIndex = 0;

        const commands = [
            { label: 'Go to Home', hint: 'Section', action: () => smoothScroll('#home') },
            { label: 'Go to Professional Journey', hint: 'Section', action: () => smoothScroll('#experience') },
            { label: 'Go to Academic Journey', hint: 'Section', action: () => smoothScroll('#education') },
            { label: 'Go to Builds', hint: 'Section', action: () => smoothScroll('#projects') },
            { label: "Go to Let's Connect", hint: 'Section', action: () => smoothScroll('#connect') },
            { label: 'Open LinkedIn', hint: 'Link', action: () => window.open('https://www.linkedin.com/in/proy27', '_blank') },
            { label: 'Open GitHub', hint: 'Link', action: () => window.open('https://github.com/priyankaroy27', '_blank') },
            { label: 'Open Resume', hint: 'PDF', action: () => window.open('Priyanka_Roy.pdf', '_blank') },
            { label: 'Toggle Theme', hint: 'Action', action: () => toggleTheme() }
        ];

        function renderCommands(filter = '') {
            const q = filter.trim().toLowerCase();
            const filtered = q ? commands.filter(c => c.label.toLowerCase().includes(q)) : commands;
            cmdList.innerHTML = '';
            filtered.forEach((c, i) => {
                const div = document.createElement('div');
                div.className = 'cp-item' + (i === 0 ? ' active' : '');
                div.setAttribute('role', 'option');
                div.innerHTML = `<span class="cp-label">${c.label}</span><span class="cp-hint">${c.hint}</span>`;
                div.addEventListener('click', () => { c.action(); hideCommandPalette(); });
                cmdList.appendChild(div);
            });
            cmdItems = Array.from(cmdList.querySelectorAll('.cp-item'));
            cmdActiveIndex = 0;
        }

        function showCommandPalette() {
            if (!cmdOverlay) return;
            cmdOverlay.classList.add('active');
            document.body.style.overflow = 'hidden';
            renderCommands('');
            setTimeout(() => cmdInput && cmdInput.focus(), 0);
        }

        function hideCommandPalette() {
            if (!cmdOverlay) return;
            cmdOverlay.classList.remove('active');
            document.body.style.overflow = '';
            if (cmdInput) cmdInput.value = '';
        }

        function moveActive(delta) {
            if (cmdItems.length === 0) return;
            cmdItems[cmdActiveIndex]?.classList.remove('active');
            cmdActiveIndex = (cmdActiveIndex + delta + cmdItems.length) % cmdItems.length;
            cmdItems[cmdActiveIndex]?.classList.add('active');
            cmdItems[cmdActiveIndex]?.scrollIntoView({ block: 'nearest' });
        }

        document.addEventListener('keydown', (e) => {
            const isCmdPaletteOpen = cmdOverlay && cmdOverlay.classList.contains('active');
            // Open palette
            if ((e.ctrlKey || e.metaKey) && e.key.toLowerCase() === 'k') {
                e.preventDefault();
                showCommandPalette();
                return;
            }
            if (e.key === '/' && !isCmdPaletteOpen && e.target.tagName !== 'INPUT' && e.target.tagName !== 'TEXTAREA') {
                e.preventDefault();
                showCommandPalette();
                return;
            }
            if (!isCmdPaletteOpen) return;
            // Palette navigation
            if (e.key === 'Escape') { hideCommandPalette(); }
            else if (e.key === 'ArrowDown') { e.preventDefault(); moveActive(1); }
            else if (e.key === 'ArrowUp') { e.preventDefault(); moveActive(-1); }
            else if (e.key === 'Enter') {
                e.preventDefault();
                const idx = cmdActiveIndex;
                const q = cmdInput ? cmdInput.value.trim().toLowerCase() : '';
                const filtered = q ? commands.filter(c => c.label.toLowerCase().includes(q)) : commands;
                const cmd = filtered[idx];
                if (cmd) { cmd.action(); hideCommandPalette(); }
            }
        });

        cmdInput && cmdInput.addEventListener('input', (e) => {
            renderCommands(e.target.value || '');
        });

        // Projects filter logic
        (function initProjectFilters() {
            const filterChips = document.querySelectorAll('.filter-chip');
            const projectCards = document.querySelectorAll('.project-card');
            if (!filterChips.length || !projectCards.length) return;

            function applyFilter(key) {
                projectCards.forEach(card => {
                    const tags = (card.dataset.tags || '').toLowerCase().split(',').map(t => t.trim());
                    if (key === 'all' || tags.includes(key)) {
                        card.classList.remove('hidden');
                    } else {
                        card.classList.add('hidden');
                    }
                });
            }

            filterChips.forEach(chip => {
                chip.addEventListener('click', () => {
                    filterChips.forEach(c => c.classList.remove('active'));
                    chip.classList.add('active');
                    applyFilter(chip.dataset.filter);
                });
            });

            applyFilter('all');
        })();
    </script>
</body>
</html>